<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="font" href="/_next/static/media/c9a5bc6a7c948fb0-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="preload" as="font" href="/_next/static/media/92f44bb82993d879-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/d3df112486f97f47.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/ce229e8280b65b88.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/67cd89eb2f8905c7.css" data-precedence="next"/><link rel="preload" href="/_next/static/chunks/webpack-f608cced2fbc4acf.js" as="script" fetchPriority="low"/><script src="/_next/static/chunks/fd9d1056-44fe9588d0e5e7bc.js" async=""></script><script src="/_next/static/chunks/596-8d845297122c6823.js" async=""></script><script src="/_next/static/chunks/main-app-f07f8834a8b67325.js" async=""></script><title>TopCoder Statistics - Problem Statement</title><meta name="description" content="TopCoder Statistics - Problem Archive"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="16x16"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="__className_aaf875"><main><h1><a href="/">Statistics</a></h1><h2>Problem Statement for &quot;<!-- -->VendingMachines<!-- -->&quot;</h2><section class="__className_c9cbed"><article><div><h3>Problem Statement</h3><div><i xmlns="http://topcoder.com">This problem has a non-standard time limit: 6 seconds.
This problem also has a non-standard precision limit: 1e-4.</i>

<p xmlns="http://topcoder.com">
Yesterday, Cat Noku has spent a long day at the arcade.
You are given the <type>int</type> <b>tickets</b>: the number of tickets he won by playing the games.
This morning he is the first customer to enter the arcade.
He now wants to exchange his tickets for prizes.
</p>

<p xmlns="http://topcoder.com">
There are multiple vending machines at the arcade.
All vending machines have just been reset into their initial state.
The vending machines are probabilistic.
Each vending machine has two parameters: its luck factor L and its value V.
A vending machine with luck factor L and value V operates as follows:
<ol>
<li>A person inserts exactly one ticket into the machine.</li>
<li>The machine computes K: the number of tickets inserted into the machine since it last gave out a prize. (This includes the ticket inserted in the previous step. If the machine didn't give out any prizes yet, K is simply the total number of tickets inserted into the machine today.)</li>
<li>With probability min(K^2,L^2)/L^2, the machine gives out a prize with value V. Otherwise, the machine does nothing.</li>
</ol>
</p>


<p xmlns="http://topcoder.com">
You are given the description of the vending machines: <type>int[]</type>s <b>luck</b> and <b>value</b>.
For each valid i, there is a vending machine with luck factor <b>luck</b>[i] and prize value <b>value</b>[i].
Each machine can be used arbitrarily many times and contains a sufficient supply of prizes (each of the same value).
</p>

<p xmlns="http://topcoder.com">
Cat Noku is very stubborn.
Whenever he chooses a vending machine, he keeps on inserting tickets into the machine until he either wins a prize or runs out of tickets.
Additionally, Noku likes variety: whenever he gets a prize from a vending machine, he goes to a different machine.
In other words, Noku will never claim two <i>consecutive</i> prizes from the same machine.
</p>

<p xmlns="http://topcoder.com">
Given the above constraint, Cat Noku wants to maximize the sum of values of prizes he gets.
More precisely, he is interested in the strategy that maximizes the expected value of that sum.
Find that strategy and return that expected value.
</p></div></div><div><h3>Definition</h3><dl><dt>Class:</dt><dd><span>VendingMachines</span></dd><dt>Method:</dt><dd><span>expectedValue</span></dd><dt>Parameters:</dt><dd><span>int, int[], int[]</span></dd><dt>Returns:</dt><dd><span>double</span></dd><dt>Method signature:</dt><dd><span>double expectedValue(int tickets, int[] luck, int[] value)</span></dd><dt>(be sure your method is public)</dt></dl></div><div><h3>Notes</h3><ul><li>Your return value must have absolute or relative error less than 1e-4.</li></ul></div><div><h3>Constraints</h3><ul><li><span>tickets will be between 1 and 40,000, inclusive.</span></li><li><span>n will be between 2 and 15, inclusive.</span></li><li><span>luck,value will have exactly n elements.</span></li><li><span>Each element of luck will be between 1 and 1,000,000,000, inclusive.</span></li><li><span>Each element of value will be between 1 and 1,000,000,000, inclusive.</span></li></ul></div><div><h3>Examples</h3><ol><li><div><p>2</p>
<p>{1,1}</p>
<p>{2,3}</p>
<p>Returns: 5.0</p>
<p>Cat Noku has 2 tickets.
There are two vending machines.
Each of them has luck factor 1, which means that the machine always gives out a prize.
Since Noku doesn't want to claim two consecutive prizes from the same machine, he will use each machine exactly once.
Thus, he is guaranteed to get a prize worth 2 and a prize worth 3, which means that the answer is 2+3 = 5.</p></div></li><li><div><p>3</p>
<p>{1,1,1}</p>
<p>{2,3,4}</p>
<p>Returns: 11.0</p>
<p>Cat Noku can use a particular machine multiple times, he just has to switch machines each time he gets a prize.
Here, the optimal strategy is to use machine 2 (0-based index), then machine 1, and then machine 2 again.
This leaves Noku with prizes worth 4+3+4 = 11.</p></div></li><li><div><p>100</p>
<p>{1, 1, 1}</p>
<p>{100,100,100}</p>
<p>Returns: 9999.99999999991</p>
<p></p></div></li><li><div><p>4</p>
<p>{2,3}</p>
<p>{4,5}</p>
<p>Returns: 7.693072702331962</p>
<p>In this case, Noku has 4 tickets and there are two machines.
Machine 0 has luck factor 2 and gives out prizes with value 4.
Machine 1 has luck factor 3 and gives out prizes with value 5.

One example of how Cat Noku can spend his tickets:

Cat Noku chooses to put his first ticket into machine 0.
This machine computes that K=1. This means that Noku will get the prize with probability (1^2)/(2^2) = 1/4 = 0.25. Suppose he is unlucky and doesn't get the prize.
Due to his stubbornness, Noku must continue by putting his second ticket into machine 0.
The machine now computes that K=2, which means that Noku is guaranteed to get the prize with value 4.
Now, Noku must switch machines. He therefore moves to machine 1.
Noku puts the next ticket (his third one) into machine 1.
This machine computes that K=1. This means that Noku will only get its prize with probability 1/9. Suppose this time he's lucky and gets the prize (with value 5).
Noku switches machines again, returning back to machine 0.
Noku puts his last ticket into machine 0.
This is the first ticket that was put into this machine since it last gave out a prize. Hence, we are now back to having K=1, and therefore the probability of getting the next prize is 1/4. Suppose he does not win this prize.

In this scenario, Noku's total value of prizes is 4 + 5 = 9.</p></div></li><li><div><p>11</p>
<p>{2,3,4}</p>
<p>{55,58,60}</p>
<p>Returns: 292.20826703848974</p>
<p></p></div></li><li><div><p>1001</p>
<p>{1, 2, 3, 4, 5, 6, 7, 8, 9, 10}</p>
<p>{1, 4, 9, 29, 35, 40, 49, 55, 63, 72}</p>
<p>Returns: 12321.244694733025</p>
<p></p></div></li><li><div><p>40000</p>
<p>{1000000000, 1}</p>
<p>{1000000000, 1}</p>
<p>Returns: 21333.928554321847</p>
<p></p></div></li><li><div><p>40000</p>
<p>{495,350,340,180,113,552,584,719,601,77,498,920,573,476,591}</p>
<p>{240,120,113,31,12,299,335,508,355,5,243,832,322,222,343}</p>
<p>Returns: 238428.2509387636</p>
<p></p></div></li><li><div><p>40000</p>
<p>{54,764,48,254,211,816,993,391,380,147,387,457,328,554,562}</p>
<p>{2,415,1,45,31,473,701,108,102,15,106,148,76,218,224}</p>
<p>Returns: 195421.85876699974</p>
<p></p></div></li><li><div><p>40000</p>
<p>{62754,84014,99910,43087,47092,91025,10154,66192,33067,21153,66383,66094,7669,87596,56721}</p>
<p>{6196,11107,15707,2921,3489,13038,162,6894,1720,704,6934,6874,92,12074,5062}</p>
<p>Returns: 207966.2311339482</p>
<p></p></div></li><li><div><p>40000</p>
<p>{70478,47301,89284,79004,98356,89772,98773,87354,80040,78480,2093,88663,25767,81374,46067}</p>
<p>{21348,9615,34261,26825,41577,34636,41930,32795,27533,26471,18,33786,2853,28459,9120}</p>
<p>Returns: 589761.5506553064</p>
<p></p></div></li><li><div><p>40000</p>
<p>{215644,566956,11091,162507,676040,973663,455773,320691,357867,454933,978574,529735,542516,152200,706329}</p>
<p>{14300,98848,37,8121,140544,291532,63880,31625,39383,63645,294481,86295,90509,7123,153420}</p>
<p>Returns: 797956.2234492035</p>
<p></p></div></li><li><div><p>40000</p>
<p>{376457,844650,683343,503685,652230,960872,93732,307157,900080,485114,635760,758792,930176,653211,356520}</p>
<p>{61172,307947,201558,109506,183621,398523,3792,40723,349691,101580,174465,248524,373468,184174,54864}</p>
<p>Returns: 1080454.2721870663</p>
<p></p></div></li><li><div><p>40000</p>
<p>{633847899,294272810,133428071,533902159,934514173,605899628,242847442,635144819,198522691,227457897,837479258,981470929,789374245,178451267,685985415}</p>
<p>{272930381,58827723,12094173,193644482,593271597,249392359,40063495,274048413,26773310,35146639,476463779,654389998,423299424,21633213,319677107}</p>
<p>Returns: 14492.805006482717</p>
<p></p></div></li><li><div><p>40000</p>
<p>{35162966,664736792,405609264,359428521,414482522,455734417,163190395,591133867,330082590,616545699,208512778,920199631,134490889,728190270,242580563}</p>
<p>{311641,111373955,41466744,32561865,43300873,52348936,6712331,88075657,27461828,95810864,10958460,213426489,4559003,133651536,14831880}</p>
<p>Returns: 5377.176500311884</p>
<p></p></div></li><li><div><p>1</p>
<p>{1000000000, 3}</p>
<p>{1000000000, 4}</p>
<p>Returns: 0.44444444444444436</p>
<p></p></div></li><li><div><p>40000</p>
<p>{10000, 35000, 30000, 40000, 30000, 20000, 20000, 30000, 20000, 40000, 20000, 10000, 1000000, 2000, 10000 }</p>
<p>{11231412, 123234, 23423, 342324, 234234, 234234, 234234, 234234, 324234, 234234, 234234, 234234, 123123, 4353463, 324123324 }</p>
<p>Returns: 1.6322359795325588E10</p></div></li></ol></div></article><hr/><span>This problem statement is the exclusive and proprietary property of TopCoder, Inc. Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited. (c)2024, TopCoder, Inc. All rights reserved.</span><hr/></section><section><span>This problem was used for:</span><div><ul><li><a href="/ProblemDetail/rd/16736/pm/14249">2016-<!-- --> <!-- -->2016 TCO Algo 2A<!-- --> - Division <!-- -->I<!-- -->, <!-- -->Level Three</a></li></ul></div></section></main><script src="/_next/static/chunks/webpack-f608cced2fbc4acf.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/c9a5bc6a7c948fb0-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/css/d3df112486f97f47.css\",{\"as\":\"style\"}]\n3:HL[\"/_next/static/css/ce229e8280b65b88.css\",{\"as\":\"style\"}]\n0:\"$L4\"\n"])</script><script>self.__next_f.push([1,"5:HL[\"/_next/static/media/92f44bb82993d879-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n6:HL[\"/_next/static/css/67cd89eb2f8905c7.css\",{\"as\":\"style\"}]\n"])</script><script>self.__next_f.push([1,"7:I{\"id\":7948,\"chunks\":[\"272:static/chunks/webpack-f608cced2fbc4acf.js\",\"971:static/chunks/fd9d1056-44fe9588d0e5e7bc.js\",\"596:static/chunks/596-8d845297122c6823.js\"],\"name\":\"default\",\"async\":false}\n9:I{\"id\":6628,\"chunks\":[\"272:static/chunks/webpack-f608cced2fbc4acf.js\",\"971:static/chunks/fd9d1056-44fe9588d0e5e7bc.js\",\"596:static/chunks/596-8d845297122c6823.js\"],\"name\":\"\",\"async\":false}\na:I{\"id\":7767,\"chunks\":[\"272:static/chunks/webpack-f608cced2fbc4acf.js\",\"971:static/chunks/fd9d1056-44fe9588d0e5e7bc.js\",\"5"])</script><script>self.__next_f.push([1,"96:static/chunks/596-8d845297122c6823.js\"],\"name\":\"default\",\"async\":false}\nb:I{\"id\":7920,\"chunks\":[\"272:static/chunks/webpack-f608cced2fbc4acf.js\",\"971:static/chunks/fd9d1056-44fe9588d0e5e7bc.js\",\"596:static/chunks/596-8d845297122c6823.js\"],\"name\":\"default\",\"async\":false}\ne:I{\"id\":1221,\"chunks\":[\"334:static/chunks/334-8828ae4f59410144.js\",\"185:static/chunks/app/layout-ec819519d0132115.js\"],\"name\":\"\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"4:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/d3df112486f97f47.css\",\"precedence\":\"next\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/ce229e8280b65b88.css\",\"precedence\":\"next\"}]],[\"$\",\"$L7\",null,{\"buildId\":\"7VpN_WliezDw3Rx1lULsj\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/ProblemStatement/pm/14249/\",\"initialTree\":[\"\",{\"children\":[\"ProblemStatement\",{\"children\":[\"pm\",{\"children\":[[\"problemId\",\"14249\",\"d\"],{\"children\":[\"__PAGE__?{\\\"problemId\\\":\\\"14249\\\"}\",{}]}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":[false,\"$L8\"],\"globalErrorComponent\":\"$9\",\"children\":[null,[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"__className_aaf875\",\"children\":[[\"$\",\"$La\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"childProp\":{\"current\":[\"$\",\"$La\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"ProblemStatement\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$La\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"ProblemStatement\",\"children\",\"pm\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$La\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"ProblemStatement\",\"children\",\"pm\",\"children\",[\"problemId\",\"14249\",\"d\"],\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$Lc\",\"$Ld\",null],\"segment\":\"__PAGE__?{\\\"problemId\\\":\\\"14249\\\"}\"},\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/67cd89eb2f8905c7.css\",\"precedence\":\"next\"}]]}],\"segment\":[\"problemId\",\"14249\",\"d\"]},\"styles\":[]}],\"segment\":\"pm\"},\"styles\":[]}],\"segment\":\"ProblemStatement\"},\"styles\":[]}],[\"$\",\"$Le\",null,{}]]}]}],null]}]]\n"])</script><script>self.__next_f.push([1,"8:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"TopCoder Statistics - Problem Statement\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"TopCoder Statistics - Problem Archive\"}],[\"$\",\"meta\",\"3\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"link\",\"4\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}],[\"$\",\"meta\",\"5\",{\"name\":\"next-size-adjust\"}]]\nc:null\n"])</script><script>self.__next_f.push([1,"f:T928,"])</script><script>self.__next_f.push([1,"\u003ci xmlns=\"http://topcoder.com\"\u003eThis problem has a non-standard time limit: 6 seconds.\nThis problem also has a non-standard precision limit: 1e-4.\u003c/i\u003e\n\n\u003cp xmlns=\"http://topcoder.com\"\u003e\nYesterday, Cat Noku has spent a long day at the arcade.\nYou are given the \u003ctype\u003eint\u003c/type\u003e \u003cb\u003etickets\u003c/b\u003e: the number of tickets he won by playing the games.\nThis morning he is the first customer to enter the arcade.\nHe now wants to exchange his tickets for prizes.\n\u003c/p\u003e\n\n\u003cp xmlns=\"http://topcoder.com\"\u003e\nThere are multiple vending machines at the arcade.\nAll vending machines have just been reset into their initial state.\nThe vending machines are probabilistic.\nEach vending machine has two parameters: its luck factor L and its value V.\nA vending machine with luck factor L and value V operates as follows:\n\u003col\u003e\n\u003cli\u003eA person inserts exactly one ticket into the machine.\u003c/li\u003e\n\u003cli\u003eThe machine computes K: the number of tickets inserted into the machine since it last gave out a prize. (This includes the ticket inserted in the previous step. If the machine didn't give out any prizes yet, K is simply the total number of tickets inserted into the machine today.)\u003c/li\u003e\n\u003cli\u003eWith probability min(K^2,L^2)/L^2, the machine gives out a prize with value V. Otherwise, the machine does nothing.\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/p\u003e\n\n\n\u003cp xmlns=\"http://topcoder.com\"\u003e\nYou are given the description of the vending machines: \u003ctype\u003eint[]\u003c/type\u003es \u003cb\u003eluck\u003c/b\u003e and \u003cb\u003evalue\u003c/b\u003e.\nFor each valid i, there is a vending machine with luck factor \u003cb\u003eluck\u003c/b\u003e[i] and prize value \u003cb\u003evalue\u003c/b\u003e[i].\nEach machine can be used arbitrarily many times and contains a sufficient supply of prizes (each of the same value).\n\u003c/p\u003e\n\n\u003cp xmlns=\"http://topcoder.com\"\u003e\nCat Noku is very stubborn.\nWhenever he chooses a vending machine, he keeps on inserting tickets into the machine until he either wins a prize or runs out of tickets.\nAdditionally, Noku likes variety: whenever he gets a prize from a vending machine, he goes to a different machine.\nIn other words, Noku will never claim two \u003ci\u003econsecutive\u003c/i\u003e prizes from the same machine.\n\u003c/p\u003e\n\n\u003cp xmlns=\"http://topcoder.com\"\u003e\nGiven the above constraint, Cat Noku wants to maximize the sum of values of prizes he gets.\nMore precisely, he is interested in the strategy that maximizes the expected value of that sum.\nFind that strategy and return that expected value.\n\u003c/p\u003e"])</script><script>self.__next_f.push([1,"10:T57a,"])</script><script>self.__next_f.push([1,"\u003cp\u003e4\u003c/p\u003e\n\u003cp\u003e{2,3}\u003c/p\u003e\n\u003cp\u003e{4,5}\u003c/p\u003e\n\u003cp\u003eReturns: 7.693072702331962\u003c/p\u003e\n\u003cp\u003eIn this case, Noku has 4 tickets and there are two machines.\nMachine 0 has luck factor 2 and gives out prizes with value 4.\nMachine 1 has luck factor 3 and gives out prizes with value 5.\n\nOne example of how Cat Noku can spend his tickets:\n\nCat Noku chooses to put his first ticket into machine 0.\nThis machine computes that K=1. This means that Noku will get the prize with probability (1^2)/(2^2) = 1/4 = 0.25. Suppose he is unlucky and doesn't get the prize.\nDue to his stubbornness, Noku must continue by putting his second ticket into machine 0.\nThe machine now computes that K=2, which means that Noku is guaranteed to get the prize with value 4.\nNow, Noku must switch machines. He therefore moves to machine 1.\nNoku puts the next ticket (his third one) into machine 1.\nThis machine computes that K=1. This means that Noku will only get its prize with probability 1/9. Suppose this time he's lucky and gets the prize (with value 5).\nNoku switches machines again, returning back to machine 0.\nNoku puts his last ticket into machine 0.\nThis is the first ticket that was put into this machine since it last gave out a prize. Hence, we are now back to having K=1, and therefore the probability of getting the next prize is 1/4. Suppose he does not win this prize.\n\nIn this scenario, Noku's total value of prizes is 4 + 5 = 9.\u003c/p\u003e"])</script><script>self.__next_f.push([1,"d:[\"$\",\"main\",null,{\"children\":[[\"$\",\"h1\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"/\",\"children\":\"Statistics\"}]}],[\"$\",\"h2\",null,{\"children\":[\"Problem Statement for \\\"\",\"VendingMachines\",\"\\\"\"]}],[\"$\",\"section\",null,{\"className\":\"__className_c9cbed\",\"children\":[[\"$\",\"article\",null,{\"children\":[[\"$\",\"div\",null,{\"children\":[[\"$\",\"h3\",null,{\"children\":\"Problem Statement\"}],[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$f\"}}]]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"h3\",null,{\"children\":\"Definition\"}],[\"$\",\"dl\",null,{\"children\":[[\"$\",\"dt\",null,{\"children\":\"Class:\"}],[\"$\",\"dd\",null,{\"children\":[\"$\",\"span\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"VendingMachines\"}}]}],[\"$\",\"dt\",null,{\"children\":\"Method:\"}],[\"$\",\"dd\",null,{\"children\":[\"$\",\"span\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"expectedValue\"}}]}],[\"$\",\"dt\",null,{\"children\":\"Parameters:\"}],[\"$\",\"dd\",null,{\"children\":[\"$\",\"span\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"int, int[], int[]\"}}]}],[\"$\",\"dt\",null,{\"children\":\"Returns:\"}],[\"$\",\"dd\",null,{\"children\":[\"$\",\"span\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"double\"}}]}],[\"$\",\"dt\",null,{\"children\":\"Method signature:\"}],[\"$\",\"dd\",null,{\"children\":[\"$\",\"span\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"double expectedValue(int tickets, int[] luck, int[] value)\"}}]}],[\"$\",\"dt\",null,{\"children\":\"(be sure your method is public)\"}]]}]]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"h3\",null,{\"children\":\"Notes\"}],[\"$\",\"ul\",null,{\"children\":[[\"$\",\"li\",\"0\",{\"children\":\"Your return value must have absolute or relative error less than 1e-4.\"}]]}]]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"h3\",null,{\"children\":\"Constraints\"}],[\"$\",\"ul\",null,{\"children\":[[\"$\",\"li\",\"0\",{\"children\":[\"$\",\"span\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"tickets will be between 1 and 40,000, inclusive.\"}}]}],[\"$\",\"li\",\"1\",{\"children\":[\"$\",\"span\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"n will be between 2 and 15, inclusive.\"}}]}],[\"$\",\"li\",\"2\",{\"children\":[\"$\",\"span\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"luck,value will have exactly n elements.\"}}]}],[\"$\",\"li\",\"3\",{\"children\":[\"$\",\"span\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"Each element of luck will be between 1 and 1,000,000,000, inclusive.\"}}]}],[\"$\",\"li\",\"4\",{\"children\":[\"$\",\"span\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"Each element of value will be between 1 and 1,000,000,000, inclusive.\"}}]}]]}]]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"h3\",null,{\"children\":\"Examples\"}],[\"$\",\"ol\",null,{\"children\":[[\"$\",\"li\",\"0\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e2\u003c/p\u003e\\n\u003cp\u003e{1,1}\u003c/p\u003e\\n\u003cp\u003e{2,3}\u003c/p\u003e\\n\u003cp\u003eReturns: 5.0\u003c/p\u003e\\n\u003cp\u003eCat Noku has 2 tickets.\\nThere are two vending machines.\\nEach of them has luck factor 1, which means that the machine always gives out a prize.\\nSince Noku doesn't want to claim two consecutive prizes from the same machine, he will use each machine exactly once.\\nThus, he is guaranteed to get a prize worth 2 and a prize worth 3, which means that the answer is 2+3 = 5.\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"1\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e3\u003c/p\u003e\\n\u003cp\u003e{1,1,1}\u003c/p\u003e\\n\u003cp\u003e{2,3,4}\u003c/p\u003e\\n\u003cp\u003eReturns: 11.0\u003c/p\u003e\\n\u003cp\u003eCat Noku can use a particular machine multiple times, he just has to switch machines each time he gets a prize.\\nHere, the optimal strategy is to use machine 2 (0-based index), then machine 1, and then machine 2 again.\\nThis leaves Noku with prizes worth 4+3+4 = 11.\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"2\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e100\u003c/p\u003e\\n\u003cp\u003e{1, 1, 1}\u003c/p\u003e\\n\u003cp\u003e{100,100,100}\u003c/p\u003e\\n\u003cp\u003eReturns: 9999.99999999991\u003c/p\u003e\\n\u003cp\u003e\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"3\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$10\"}}]}],[\"$\",\"li\",\"4\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e11\u003c/p\u003e\\n\u003cp\u003e{2,3,4}\u003c/p\u003e\\n\u003cp\u003e{55,58,60}\u003c/p\u003e\\n\u003cp\u003eReturns: 292.20826703848974\u003c/p\u003e\\n\u003cp\u003e\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"5\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e1001\u003c/p\u003e\\n\u003cp\u003e{1, 2, 3, 4, 5, 6, 7, 8, 9, 10}\u003c/p\u003e\\n\u003cp\u003e{1, 4, 9, 29, 35, 40, 49, 55, 63, 72}\u003c/p\u003e\\n\u003cp\u003eReturns: 12321.244694733025\u003c/p\u003e\\n\u003cp\u003e\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"6\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e40000\u003c/p\u003e\\n\u003cp\u003e{1000000000, 1}\u003c/p\u003e\\n\u003cp\u003e{1000000000, 1}\u003c/p\u003e\\n\u003cp\u003eReturns: 21333.928554321847\u003c/p\u003e\\n\u003cp\u003e\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"7\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e40000\u003c/p\u003e\\n\u003cp\u003e{495,350,340,180,113,552,584,719,601,77,498,920,573,476,591}\u003c/p\u003e\\n\u003cp\u003e{240,120,113,31,12,299,335,508,355,5,243,832,322,222,343}\u003c/p\u003e\\n\u003cp\u003eReturns: 238428.2509387636\u003c/p\u003e\\n\u003cp\u003e\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"8\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e40000\u003c/p\u003e\\n\u003cp\u003e{54,764,48,254,211,816,993,391,380,147,387,457,328,554,562}\u003c/p\u003e\\n\u003cp\u003e{2,415,1,45,31,473,701,108,102,15,106,148,76,218,224}\u003c/p\u003e\\n\u003cp\u003eReturns: 195421.85876699974\u003c/p\u003e\\n\u003cp\u003e\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"9\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e40000\u003c/p\u003e\\n\u003cp\u003e{62754,84014,99910,43087,47092,91025,10154,66192,33067,21153,66383,66094,7669,87596,56721}\u003c/p\u003e\\n\u003cp\u003e{6196,11107,15707,2921,3489,13038,162,6894,1720,704,6934,6874,92,12074,5062}\u003c/p\u003e\\n\u003cp\u003eReturns: 207966.2311339482\u003c/p\u003e\\n\u003cp\u003e\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"10\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e40000\u003c/p\u003e\\n\u003cp\u003e{70478,47301,89284,79004,98356,89772,98773,87354,80040,78480,2093,88663,25767,81374,46067}\u003c/p\u003e\\n\u003cp\u003e{21348,9615,34261,26825,41577,34636,41930,32795,27533,26471,18,33786,2853,28459,9120}\u003c/p\u003e\\n\u003cp\u003eReturns: 589761.5506553064\u003c/p\u003e\\n\u003cp\u003e\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"11\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e40000\u003c/p\u003e\\n\u003cp\u003e{215644,566956,11091,162507,676040,973663,455773,320691,357867,454933,978574,529735,542516,152200,706329}\u003c/p\u003e\\n\u003cp\u003e{14300,98848,37,8121,140544,291532,63880,31625,39383,63645,294481,86295,90509,7123,153420}\u003c/p\u003e\\n\u003cp\u003eReturns: 797956.2234492035\u003c/p\u003e\\n\u003cp\u003e\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"12\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e40000\u003c/p\u003e\\n\u003cp\u003e{376457,844650,683343,503685,652230,960872,93732,307157,900080,485114,635760,758792,930176,653211,356520}\u003c/p\u003e\\n\u003cp\u003e{61172,307947,201558,109506,183621,398523,3792,40723,349691,101580,174465,248524,373468,184174,54864}\u003c/p\u003e\\n\u003cp\u003eReturns: 1080454.2721870663\u003c/p\u003e\\n\u003cp\u003e\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"13\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e40000\u003c/p\u003e\\n\u003cp\u003e{633847899,294272810,133428071,533902159,934514173,605899628,242847442,635144819,198522691,227457897,837479258,981470929,789374245,178451267,685985415}\u003c/p\u003e\\n\u003cp\u003e{272930381,58827723,12094173,193644482,593271597,249392359,40063495,274048413,26773310,35146639,476463779,654389998,423299424,21633213,319677107}\u003c/p\u003e\\n\u003cp\u003eReturns: 14492.805006482717\u003c/p\u003e\\n\u003cp\u003e\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"14\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e40000\u003c/p\u003e\\n\u003cp\u003e{35162966,664736792,405609264,359428521,414482522,455734417,163190395,591133867,330082590,616545699,208512778,920199631,134490889,728190270,242580563}\u003c/p\u003e\\n\u003cp\u003e{311641,111373955,41466744,32561865,43300873,52348936,6712331,88075657,27461828,95810864,10958460,213426489,4559003,133651536,14831880}\u003c/p\u003e\\n\u003cp\u003eReturns: 5377.176500311884\u003c/p\u003e\\n\u003cp\u003e\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"15\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e1\u003c/p\u003e\\n\u003cp\u003e{1000000000, 3}\u003c/p\u003e\\n\u003cp\u003e{1000000000, 4}\u003c/p\u003e\\n\u003cp\u003eReturns: 0.44444444444444436\u003c/p\u003e\\n\u003cp\u003e\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"16\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e40000\u003c/p\u003e\\n\u003cp\u003e{10000, 35000, 30000, 40000, 30000, 20000, 20000, 30000, 20000, 40000, 20000, 10000, 1000000, 2000, 10000 }\u003c/p\u003e\\n\u003cp\u003e{11231412, 123234, 23423, 342324, 234234, 234234, 234234, 234234, 324234, 234234, 234234, 234234, 123123, 4353463, 324123324 }\u003c/p\u003e\\n\u003cp\u003eReturns: 1.6322359795325588E10\u003c/p\u003e\"}}]}]]}]]}]]}],[\"$\",\"hr\",null,{}],[\"$\",\"span\",null,{\"children\":\"This problem statement is the exclusive and proprietary property of TopCoder, Inc. Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited. (c)2024, TopCoder, Inc. All rights reserved.\"}],[\"$\",\"hr\",null,{}]]}],[\"$\",\"section\",null,{\"children\":[[\"$\",\"span\",null,{\"children\":\"This problem was used for:\"}],[\"$\",\"div\",null,{\"children\":[\"$\",\"ul\",null,{\"children\":[[\"$\",\"li\",\"0\",{\"children\":[\"$\",\"a\",null,{\"href\":\"/ProblemDetail/rd/16736/pm/14249\",\"children\":[\"2016-\",\" \",\"2016 TCO Algo 2A\",\" - Division \",\"I\",\", \",\"Level Three\"]}]}]]}]}]]}]]}]\n"])</script></body></html>