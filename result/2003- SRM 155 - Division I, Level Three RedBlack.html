<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="font" href="/_next/static/media/c9a5bc6a7c948fb0-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="preload" as="font" href="/_next/static/media/92f44bb82993d879-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/d3df112486f97f47.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/ce229e8280b65b88.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/67cd89eb2f8905c7.css" data-precedence="next"/><link rel="preload" href="/_next/static/chunks/webpack-f608cced2fbc4acf.js" as="script" fetchPriority="low"/><script src="/_next/static/chunks/fd9d1056-44fe9588d0e5e7bc.js" async=""></script><script src="/_next/static/chunks/596-8d845297122c6823.js" async=""></script><script src="/_next/static/chunks/main-app-f07f8834a8b67325.js" async=""></script><title>TopCoder Statistics - Problem Statement</title><meta name="description" content="TopCoder Statistics - Problem Archive"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="16x16"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="__className_aaf875"><main><h1><a href="/">Statistics</a></h1><h2>Problem Statement for &quot;<!-- -->RedBlack<!-- -->&quot;</h2><section class="__className_c9cbed"><article><div><h3>Problem Statement</h3><div><p xmlns="http://topcoder.com">
Balanced binary search trees are among the most studied data structures in computer science.
However, implementing them can be rather tricky.  Most designs of balanced binary search trees
are based on the same four basic transformations--left single rotations, right single rotations, left double
rotations, and right double rotations--but differ in exactly when and where these transformations are
applied.
</p>

<p xmlns="http://topcoder.com">
<i>Red-black trees</i> are one of the most popular kinds of balanced binary search trees.  In a red-black tree, every node is 
colored either red or black, and no red node is allowed to have a red parent.  In addition, every path from the root to a leaf contains
the same number of black nodes.  Most books on data structures contain a description 
of how to maintain the red-black properties, based on the usual four rotations.  In this problem, we will consider a simpler
scheme for maintaining red-black trees, based on a single transformation, called a <i>twist</i>.
</p>

<p xmlns="http://topcoder.com">
Inserting a new key into a red-black tree proceeds in two phases: a search phase followed by a rebalancing phase.  In the search phase,
you start at the root and walk down the tree, going left when the new key is smaller than the key at the current node and going right when the new key is larger than the key at the current node.  (You may assume the new key will not be equal to the key at the current
node.)  When the search reaches the bottom of the tree, the new key is added as a new child of the last node in the search path, on the
left or right, as appropriate.  The new node is always a leaf and is always colored <i>red</i>.
</p>

<p xmlns="http://topcoder.com">
If the new node's parent is also red, then we now have a violation of the rule that no red node may have a red parent.  The job of
the rebalancing phase is to detect such situations, and to correct them using a transformation called a <i>twist</i>.  A twist involves the red node, its red parent, and its black grandparent.  There are four possible configurations for these three nodes, shown below:
</p>
<pre xmlns="http://topcoder.com">
     (Blk) z         (Blk) z               x (Blk)         x (Blk)
          / \             / \             / \             / \
   (Red) y   T4    (Red) x   T4         T1   z (Red)    T1   y (Red)
        / \             / \                 / \             / \
 (Red) x   T3         T1   y (Red)   (Red) y   T4         T2   z (Red)
      / \                 / \             / \                 / \
    T1   T2             T2   T3         T2   T3             T3   T4
</pre>
where <tt xmlns="http://topcoder.com">T1</tt>, <tt xmlns="http://topcoder.com">T2</tt>, <tt xmlns="http://topcoder.com">T3</tt>, and <tt xmlns="http://topcoder.com">T4</tt> are subtrees (possibly empty).
All four configurations are rewritten to exactly the same shape:
<pre xmlns="http://topcoder.com">
                             (Red) y
                                  / \
                                 /   \
                          (Blk) x     z (Blk)
                               / \   / \
                              T1 T2 T3 T4  
</pre>
After the twist, <tt xmlns="http://topcoder.com">y</tt>'s parent may be red, so the process continues until there are no more positions where a twist can be 
applied.  Note that there will never be more than one red node with a red parent at the same time.

<p xmlns="http://topcoder.com">
There is one last case to worry about.  It is possible to have a red node with a red parent, but with no grandparent because the parent
is the root.  A twist cannot be applied without the grandparent, so to protect against this case, we color the root black at the
end of every insert.
</p>

<p xmlns="http://topcoder.com">
Given a sequence of numbers to be inserted one at a time into an initially empty red-black tree, your task is to determine the 
total number of twists that occur during the inserts.
</p>

<p xmlns="http://topcoder.com">
As an example, consider the steps involved in inserting the numbers {1,2,3}.  Initially the tree is empty, so when we
insert the 1 node, it becomes the new root.  The new node starts out red, but, because it is the root, it is recolored black 
at the end of the insert.  The tree now looks like
</p>
<pre xmlns="http://topcoder.com">
            1 (Blk)
</pre>
When we insert the 2 node, it goes on the right.  The new node is colored red.
<pre xmlns="http://topcoder.com">
            1 (Blk)
             \
              2 (Red)
</pre>
When we insert the 3 node, it again goes on the right and is colored red.
<pre xmlns="http://topcoder.com">
            1 (Blk)
             \
              2 (Red)
               \
                3 (Red)
</pre>
The new node starts out red, but it has a red parent, so a twist is necessary.  After the twist, the tree looks like
<pre xmlns="http://topcoder.com">
            2 (Red)
           / \
    (Blk) 1   3 (Blk)
</pre>
However, the root is recolored black at the end of every insert, so the final tree is
<pre xmlns="http://topcoder.com">
            2 (Blk)
           / \
    (Blk) 1   3 (Blk)
</pre>
Altogether, this series of inserts requires 1 twist, so your method should return 1.</div></div><div><h3>Definition</h3><dl><dt>Class:</dt><dd><span>RedBlack</span></dd><dt>Method:</dt><dd><span>numTwists</span></dd><dt>Parameters:</dt><dd><span>int[]</span></dd><dt>Returns:</dt><dd><span>int</span></dd><dt>Method signature:</dt><dd><span>int numTwists(int[] keys)</span></dd><dt>(be sure your method is public)</dt></dl></div><div><h3>Constraints</h3><ul><li><span>keys contains between 1 and 50 elements, inclusive.</span></li><li><span>keys is a permutation of the numbers between 1 and n, inclusive, where n is the length of keys.</span></li></ul></div><div><h3>Examples</h3><ol><li><div><p>{ 1,2,3 }</p>
<p>Returns: 1</p>
<p>The example above.</p></div></li><li><div><p>{ 1,2,3,4,5,6,7 }</p>
<p>Returns: 4</p>
<p>One twist happens when we insert the 3, and another happens when we insert the 5, leaving

            2 (Blk)
           / \
    (Blk) 1   4 (Red)
             / \
      (Blk) 3   5 (Blk)

When we insert the 7, we initially get

            2 (Blk)
           / \
    (Blk) 1   4 (Red)
             / \
      (Blk) 3   5 (Blk)
                 \
                  6 (Red)
                   \
                    7 (Red)

but the 7 node has a red parent, so we do a twist

            2 (Blk)
           / \
    (Blk) 1   4 (Red)
             / \
      (Blk) 3   6 (Red)
               / \
        (Blk) 5   7 (Blk)

Now, the 6 node has a red parent, so we do another twist.

            4 (Red)
           / \
          /   \
   (Blk) 2     6 (Blk)
        / \   / \
       1   3 5   7   <--- all four leaves are black

At the end of the insert, we recolor the root black.

            4 (Blk)
           / \
          /   \
   (Blk) 2     6 (Blk)
        / \   / \
       1   3 5   7   <--- all four leaves are black

Altogether, 4 twists were required.</p></div></li><li><div><p>{ 7,1,4,6,3,5,2 }</p>
<p>Returns: 3</p></div></li><li><div><p>{ 2,1,3,4 }</p>
<p>Returns: 1</p></div></li><li><div><p>{ 1 }</p>
<p>Returns: 0</p></div></li><li><div><p>{ 5,10,15,14,3,4,11,2,1,12,6,9,7,13,8 }</p>
<p>Returns: 11</p></div></li><li><div><p>{ 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50 }</p>
<p>Returns: 42</p></div></li><li><div><p>{ 7,5,6,4,13,1,3,10,15,2,8,9,11,12,14 }</p>
<p>Returns: 11</p></div></li><li><div><p>{ 31,6,20,8,21,28,15,14,5,30,25,13,19,9,12,22,18,2,27,10,3,24,26,7,11,16,17,32,29,1,33,23,4 }</p>
<p>Returns: 25</p></div></li><li><div><p>{ 1,20,2,19,3,18,4,17,5,16,6,15,7,14,8,13,9,12,10,11 }</p>
<p>Returns: 14</p></div></li><li><div><p>{ 10,9,11,8,12,7,13,6,14,5,15,4,16,3,17,2,18,1,19 }</p>
<p>Returns: 11</p></div></li><li><div><p>{ 8,4,12,2,10,6,14,1,9,7,15,5,11,3,13 }</p>
<p>Returns: 5</p></div></li><li><div><p>{ 2,4,9,7,10,6,8,1,5,3 }</p>
<p>Returns: 2</p></div></li><li><div><p>{ 8,7,10,5,1,3,6,12,11,13,2,9,4 }</p>
<p>Returns: 3</p></div></li><li><div><p>{ 15,2,9,5,3,13,11,7,8,14,1,16,4,6,10,12 }</p>
<p>Returns: 5</p></div></li><li><div><p>{ 6,8,10,12,4,2,18,14,16,19,7,15,9,17,13,5,11,3,1 }</p>
<p>Returns: 5</p></div></li><li><div><p>{ 7,6,13,10,17,8,5,16,18,14,3,9,4,11,1,19,12,2,15 }
</p>
<p>Returns: 14</p></div></li><li><div><p>{ 3,13,6,5,9,14,12,11,8,2,4,1,17,7,15,16,10 }</p>
<p>Returns: 12</p></div></li><li><div><p>{ 5,4,6,9,3,1,8,2,7 }</p>
<p>Returns: 5</p></div></li><li><div><p>{ 29,15,18,25,16,7,12,28,34,35,3,27,33,6,21,24,30,31,26,23,11,10,14,1,17,4,5,9,32,20,13,19,8,22,2 }</p>
<p>Returns: 29</p></div></li><li><div><p>{ 25,7,16,33,1,19,30,13,12,29,28,34,39,41,38,22,11,32,26,14,31,23,37,6,40,21,24,10,5,17,36,35,15,2,4,3,9,8,18,20,27 }</p>
<p>Returns: 32</p></div></li><li><div><p>{ 3,26,38,21,39,6,16,46,15,27,20,14,50,32,24,19,33,37,17,29,18,11,36,25,48,49,5,7,13,35,28,45,10,4,31,34,44,40,22,43,41,9,1,47,12,8,2,23,30,42 }</p>
<p>Returns: 38</p></div></li><li><div><p>{ 2,16,8,40,42,33,25,15,1,4,6,17,41,31,49,19,10,50,13,12,35,23,29,37,21,18,7,38,14,24,39,46,5,28,32,47,26,11,9,20,27,3,44,45,22,48,43,34,30,36 }</p>
<p>Returns: 20</p></div></li><li><div><p>{ 19,12,17,6,2,8,23,10,14,21,3,15,25,27,1,13,4,11,16,22,9,20,24,7,26,5,18 }</p>
<p>Returns: 9</p></div></li><li><div><p>{ 6,8,20,21,4,23,18,28,36,32,26,22,16,24,34,12,10,15,25,40,2,7,19,29,1,11,9,14,31,5,38,3,27,30,17,35,13,39,33,37 }</p>
<p>Returns: 14</p></div></li><li><div><p>{ 2,1,3 }</p>
<p>Returns: 0</p></div></li><li><div><p>{ 5,  10,  15,  14,  3,  4,  11,  2,  1,  12,  6,  9,  7,  13,  8,  19,  18,  17,  16,  20,  40,  39,  38,  37,  36,  35,  34,  33,  32,  31,  30,  21,  22,  23,  24,  25,  26,  27,  28,  29,  41,  43,  45,  47,  49,  50,  48,  46,  44,  42 }</p>
<p>Returns: 37</p></div></li></ol></div></article><hr/><span>This problem statement is the exclusive and proprietary property of TopCoder, Inc. Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited. (c)2024, TopCoder, Inc. All rights reserved.</span><hr/></section><section><span>This problem was used for:</span><div><ul><li><a href="/ProblemDetail/rd/4580/pm/1748">2003-<!-- --> <!-- -->SRM 155<!-- --> - Division <!-- -->I<!-- -->, <!-- -->Level Three</a></li></ul></div></section></main><script src="/_next/static/chunks/webpack-f608cced2fbc4acf.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/c9a5bc6a7c948fb0-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/css/d3df112486f97f47.css\",{\"as\":\"style\"}]\n3:HL[\"/_next/static/css/ce229e8280b65b88.css\",{\"as\":\"style\"}]\n0:\"$L4\"\n"])</script><script>self.__next_f.push([1,"5:HL[\"/_next/static/media/92f44bb82993d879-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n6:HL[\"/_next/static/css/67cd89eb2f8905c7.css\",{\"as\":\"style\"}]\n"])</script><script>self.__next_f.push([1,"7:I{\"id\":7948,\"chunks\":[\"272:static/chunks/webpack-f608cced2fbc4acf.js\",\"971:static/chunks/fd9d1056-44fe9588d0e5e7bc.js\",\"596:static/chunks/596-8d845297122c6823.js\"],\"name\":\"default\",\"async\":false}\n9:I{\"id\":6628,\"chunks\":[\"272:static/chunks/webpack-f608cced2fbc4acf.js\",\"971:static/chunks/fd9d1056-44fe9588d0e5e7bc.js\",\"596:static/chunks/596-8d845297122c6823.js\"],\"name\":\"\",\"async\":false}\na:I{\"id\":7767,\"chunks\":[\"272:static/chunks/webpack-f608cced2fbc4acf.js\",\"971:static/chunks/fd9d1056-44fe9588d0e5e7bc.js\",\"5"])</script><script>self.__next_f.push([1,"96:static/chunks/596-8d845297122c6823.js\"],\"name\":\"default\",\"async\":false}\nb:I{\"id\":7920,\"chunks\":[\"272:static/chunks/webpack-f608cced2fbc4acf.js\",\"971:static/chunks/fd9d1056-44fe9588d0e5e7bc.js\",\"596:static/chunks/596-8d845297122c6823.js\"],\"name\":\"default\",\"async\":false}\ne:I{\"id\":1221,\"chunks\":[\"334:static/chunks/334-8828ae4f59410144.js\",\"185:static/chunks/app/layout-ec819519d0132115.js\"],\"name\":\"\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"4:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/d3df112486f97f47.css\",\"precedence\":\"next\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/ce229e8280b65b88.css\",\"precedence\":\"next\"}]],[\"$\",\"$L7\",null,{\"buildId\":\"7VpN_WliezDw3Rx1lULsj\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/ProblemStatement/pm/1748/\",\"initialTree\":[\"\",{\"children\":[\"ProblemStatement\",{\"children\":[\"pm\",{\"children\":[[\"problemId\",\"1748\",\"d\"],{\"children\":[\"__PAGE__?{\\\"problemId\\\":\\\"1748\\\"}\",{}]}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":[false,\"$L8\"],\"globalErrorComponent\":\"$9\",\"children\":[null,[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"__className_aaf875\",\"children\":[[\"$\",\"$La\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"childProp\":{\"current\":[\"$\",\"$La\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"ProblemStatement\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$La\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"ProblemStatement\",\"children\",\"pm\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$La\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"ProblemStatement\",\"children\",\"pm\",\"children\",[\"problemId\",\"1748\",\"d\"],\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$Lc\",\"$Ld\",null],\"segment\":\"__PAGE__?{\\\"problemId\\\":\\\"1748\\\"}\"},\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/67cd89eb2f8905c7.css\",\"precedence\":\"next\"}]]}],\"segment\":[\"problemId\",\"1748\",\"d\"]},\"styles\":[]}],\"segment\":\"pm\"},\"styles\":[]}],\"segment\":\"ProblemStatement\"},\"styles\":[]}],[\"$\",\"$Le\",null,{}]]}]}],null]}]]\n"])</script><script>self.__next_f.push([1,"8:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"TopCoder Statistics - Problem Statement\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"TopCoder Statistics - Problem Archive\"}],[\"$\",\"meta\",\"3\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"link\",\"4\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}],[\"$\",\"meta\",\"5\",{\"name\":\"next-size-adjust\"}]]\nc:null\nf:T14b1,"])</script><script>self.__next_f.push([1,"\u003cp xmlns=\"http://topcoder.com\"\u003e\nBalanced binary search trees are among the most studied data structures in computer science.\nHowever, implementing them can be rather tricky.  Most designs of balanced binary search trees\nare based on the same four basic transformations--left single rotations, right single rotations, left double\nrotations, and right double rotations--but differ in exactly when and where these transformations are\napplied.\n\u003c/p\u003e\n\n\u003cp xmlns=\"http://topcoder.com\"\u003e\n\u003ci\u003eRed-black trees\u003c/i\u003e are one of the most popular kinds of balanced binary search trees.  In a red-black tree, every node is \ncolored either red or black, and no red node is allowed to have a red parent.  In addition, every path from the root to a leaf contains\nthe same number of black nodes.  Most books on data structures contain a description \nof how to maintain the red-black properties, based on the usual four rotations.  In this problem, we will consider a simpler\nscheme for maintaining red-black trees, based on a single transformation, called a \u003ci\u003etwist\u003c/i\u003e.\n\u003c/p\u003e\n\n\u003cp xmlns=\"http://topcoder.com\"\u003e\nInserting a new key into a red-black tree proceeds in two phases: a search phase followed by a rebalancing phase.  In the search phase,\nyou start at the root and walk down the tree, going left when the new key is smaller than the key at the current node and going right when the new key is larger than the key at the current node.  (You may assume the new key will not be equal to the key at the current\nnode.)  When the search reaches the bottom of the tree, the new key is added as a new child of the last node in the search path, on the\nleft or right, as appropriate.  The new node is always a leaf and is always colored \u003ci\u003ered\u003c/i\u003e.\n\u003c/p\u003e\n\n\u003cp xmlns=\"http://topcoder.com\"\u003e\nIf the new node's parent is also red, then we now have a violation of the rule that no red node may have a red parent.  The job of\nthe rebalancing phase is to detect such situations, and to correct them using a transformation called a \u003ci\u003etwist\u003c/i\u003e.  A twist involves the red node, its red parent, and its black grandparent.  There are four possible configurations for these three nodes, shown below:\n\u003c/p\u003e\n\u003cpre xmlns=\"http://topcoder.com\"\u003e\n     (Blk) z         (Blk) z               x (Blk)         x (Blk)\n          / \\             / \\             / \\             / \\\n   (Red) y   T4    (Red) x   T4         T1   z (Red)    T1   y (Red)\n        / \\             / \\                 / \\             / \\\n (Red) x   T3         T1   y (Red)   (Red) y   T4         T2   z (Red)\n      / \\                 / \\             / \\                 / \\\n    T1   T2             T2   T3         T2   T3             T3   T4\n\u003c/pre\u003e\nwhere \u003ctt xmlns=\"http://topcoder.com\"\u003eT1\u003c/tt\u003e, \u003ctt xmlns=\"http://topcoder.com\"\u003eT2\u003c/tt\u003e, \u003ctt xmlns=\"http://topcoder.com\"\u003eT3\u003c/tt\u003e, and \u003ctt xmlns=\"http://topcoder.com\"\u003eT4\u003c/tt\u003e are subtrees (possibly empty).\nAll four configurations are rewritten to exactly the same shape:\n\u003cpre xmlns=\"http://topcoder.com\"\u003e\n                             (Red) y\n                                  / \\\n                                 /   \\\n                          (Blk) x     z (Blk)\n                               / \\   / \\\n                              T1 T2 T3 T4  \n\u003c/pre\u003e\nAfter the twist, \u003ctt xmlns=\"http://topcoder.com\"\u003ey\u003c/tt\u003e's parent may be red, so the process continues until there are no more positions where a twist can be \napplied.  Note that there will never be more than one red node with a red parent at the same time.\n\n\u003cp xmlns=\"http://topcoder.com\"\u003e\nThere is one last case to worry about.  It is possible to have a red node with a red parent, but with no grandparent because the parent\nis the root.  A twist cannot be applied without the grandparent, so to protect against this case, we color the root black at the\nend of every insert.\n\u003c/p\u003e\n\n\u003cp xmlns=\"http://topcoder.com\"\u003e\nGiven a sequence of numbers to be inserted one at a time into an initially empty red-black tree, your task is to determine the \ntotal number of twists that occur during the inserts.\n\u003c/p\u003e\n\n\u003cp xmlns=\"http://topcoder.com\"\u003e\nAs an example, consider the steps involved in inserting the numbers {1,2,3}.  Initially the tree is empty, so when we\ninsert the 1 node, it becomes the new root.  The new node starts out red, but, because it is the root, it is recolored black \nat the end of the insert.  The tree now looks like\n\u003c/p\u003e\n\u003cpre xmlns=\"http://topcoder.com\"\u003e\n            1 (Blk)\n\u003c/pre\u003e\nWhen we insert the 2 node, it goes on the right.  The new node is colored red.\n\u003cpre xmlns=\"http://topcoder.com\"\u003e\n            1 (Blk)\n             \\\n              2 (Red)\n\u003c/pre\u003e\nWhen we insert the 3 node, it again goes on the right and is colored red.\n\u003cpre xmlns=\"http://topcoder.com\"\u003e\n            1 (Blk)\n             \\\n              2 (Red)\n               \\\n                3 (Red)\n\u003c/pre\u003e\nThe new node starts out red, but it has a red parent, so a twist is necessary.  After the twist, the tree looks like\n\u003cpre xmlns=\"http://topcoder.com\"\u003e\n            2 (Red)\n           / \\\n    (Blk) 1   3 (Blk)\n\u003c/pre\u003e\nHowever, the root is recolored black at the end of every insert, so the final tree is\n\u003cpre xmlns=\"http://topcoder.com\"\u003e\n            2 (Blk)\n           / \\\n    (Blk) 1   3 (Blk)\n\u003c/pre\u003e\nAltogether, this series of inserts requires 1 twist, so your method should return 1."])</script><script>self.__next_f.push([1,"10:T452,"])</script><script>self.__next_f.push([1,"\u003cp\u003e{ 1,2,3,4,5,6,7 }\u003c/p\u003e\n\u003cp\u003eReturns: 4\u003c/p\u003e\n\u003cp\u003eOne twist happens when we insert the 3, and another happens when we insert the 5, leaving\n\n            2 (Blk)\n           / \\\n    (Blk) 1   4 (Red)\n             / \\\n      (Blk) 3   5 (Blk)\n\nWhen we insert the 7, we initially get\n\n            2 (Blk)\n           / \\\n    (Blk) 1   4 (Red)\n             / \\\n      (Blk) 3   5 (Blk)\n                 \\\n                  6 (Red)\n                   \\\n                    7 (Red)\n\nbut the 7 node has a red parent, so we do a twist\n\n            2 (Blk)\n           / \\\n    (Blk) 1   4 (Red)\n             / \\\n      (Blk) 3   6 (Red)\n               / \\\n        (Blk) 5   7 (Blk)\n\nNow, the 6 node has a red parent, so we do another twist.\n\n            4 (Red)\n           / \\\n          /   \\\n   (Blk) 2     6 (Blk)\n        / \\   / \\\n       1   3 5   7   \u003c--- all four leaves are black\n\nAt the end of the insert, we recolor the root black.\n\n            4 (Blk)\n           / \\\n          /   \\\n   (Blk) 2     6 (Blk)\n        / \\   / \\\n       1   3 5   7   \u003c--- all four leaves are black\n\nAltogether, 4 twists were required.\u003c/p\u003e"])</script><script>self.__next_f.push([1,"d:[\"$\",\"main\",null,{\"children\":[[\"$\",\"h1\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"/\",\"children\":\"Statistics\"}]}],[\"$\",\"h2\",null,{\"children\":[\"Problem Statement for \\\"\",\"RedBlack\",\"\\\"\"]}],[\"$\",\"section\",null,{\"className\":\"__className_c9cbed\",\"children\":[[\"$\",\"article\",null,{\"children\":[[\"$\",\"div\",null,{\"children\":[[\"$\",\"h3\",null,{\"children\":\"Problem Statement\"}],[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$f\"}}]]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"h3\",null,{\"children\":\"Definition\"}],[\"$\",\"dl\",null,{\"children\":[[\"$\",\"dt\",null,{\"children\":\"Class:\"}],[\"$\",\"dd\",null,{\"children\":[\"$\",\"span\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"RedBlack\"}}]}],[\"$\",\"dt\",null,{\"children\":\"Method:\"}],[\"$\",\"dd\",null,{\"children\":[\"$\",\"span\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"numTwists\"}}]}],[\"$\",\"dt\",null,{\"children\":\"Parameters:\"}],[\"$\",\"dd\",null,{\"children\":[\"$\",\"span\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"int[]\"}}]}],[\"$\",\"dt\",null,{\"children\":\"Returns:\"}],[\"$\",\"dd\",null,{\"children\":[\"$\",\"span\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"int\"}}]}],[\"$\",\"dt\",null,{\"children\":\"Method signature:\"}],[\"$\",\"dd\",null,{\"children\":[\"$\",\"span\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"int numTwists(int[] keys)\"}}]}],[\"$\",\"dt\",null,{\"children\":\"(be sure your method is public)\"}]]}]]}],null,[\"$\",\"div\",null,{\"children\":[[\"$\",\"h3\",null,{\"children\":\"Constraints\"}],[\"$\",\"ul\",null,{\"children\":[[\"$\",\"li\",\"0\",{\"children\":[\"$\",\"span\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"keys contains between 1 and 50 elements, inclusive.\"}}]}],[\"$\",\"li\",\"1\",{\"children\":[\"$\",\"span\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"keys is a permutation of the numbers between 1 and n, inclusive, where n is the length of keys.\"}}]}]]}]]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"h3\",null,{\"children\":\"Examples\"}],[\"$\",\"ol\",null,{\"children\":[[\"$\",\"li\",\"0\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e{ 1,2,3 }\u003c/p\u003e\\n\u003cp\u003eReturns: 1\u003c/p\u003e\\n\u003cp\u003eThe example above.\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"1\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$10\"}}]}],[\"$\",\"li\",\"2\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e{ 7,1,4,6,3,5,2 }\u003c/p\u003e\\n\u003cp\u003eReturns: 3\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"3\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e{ 2,1,3,4 }\u003c/p\u003e\\n\u003cp\u003eReturns: 1\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"4\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e{ 1 }\u003c/p\u003e\\n\u003cp\u003eReturns: 0\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"5\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e{ 5,10,15,14,3,4,11,2,1,12,6,9,7,13,8 }\u003c/p\u003e\\n\u003cp\u003eReturns: 11\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"6\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e{ 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50 }\u003c/p\u003e\\n\u003cp\u003eReturns: 42\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"7\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e{ 7,5,6,4,13,1,3,10,15,2,8,9,11,12,14 }\u003c/p\u003e\\n\u003cp\u003eReturns: 11\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"8\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e{ 31,6,20,8,21,28,15,14,5,30,25,13,19,9,12,22,18,2,27,10,3,24,26,7,11,16,17,32,29,1,33,23,4 }\u003c/p\u003e\\n\u003cp\u003eReturns: 25\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"9\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e{ 1,20,2,19,3,18,4,17,5,16,6,15,7,14,8,13,9,12,10,11 }\u003c/p\u003e\\n\u003cp\u003eReturns: 14\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"10\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e{ 10,9,11,8,12,7,13,6,14,5,15,4,16,3,17,2,18,1,19 }\u003c/p\u003e\\n\u003cp\u003eReturns: 11\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"11\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e{ 8,4,12,2,10,6,14,1,9,7,15,5,11,3,13 }\u003c/p\u003e\\n\u003cp\u003eReturns: 5\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"12\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e{ 2,4,9,7,10,6,8,1,5,3 }\u003c/p\u003e\\n\u003cp\u003eReturns: 2\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"13\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e{ 8,7,10,5,1,3,6,12,11,13,2,9,4 }\u003c/p\u003e\\n\u003cp\u003eReturns: 3\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"14\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e{ 15,2,9,5,3,13,11,7,8,14,1,16,4,6,10,12 }\u003c/p\u003e\\n\u003cp\u003eReturns: 5\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"15\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e{ 6,8,10,12,4,2,18,14,16,19,7,15,9,17,13,5,11,3,1 }\u003c/p\u003e\\n\u003cp\u003eReturns: 5\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"16\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e{ 7,6,13,10,17,8,5,16,18,14,3,9,4,11,1,19,12,2,15 }\\n\u003c/p\u003e\\n\u003cp\u003eReturns: 14\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"17\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e{ 3,13,6,5,9,14,12,11,8,2,4,1,17,7,15,16,10 }\u003c/p\u003e\\n\u003cp\u003eReturns: 12\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"18\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e{ 5,4,6,9,3,1,8,2,7 }\u003c/p\u003e\\n\u003cp\u003eReturns: 5\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"19\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e{ 29,15,18,25,16,7,12,28,34,35,3,27,33,6,21,24,30,31,26,23,11,10,14,1,17,4,5,9,32,20,13,19,8,22,2 }\u003c/p\u003e\\n\u003cp\u003eReturns: 29\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"20\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e{ 25,7,16,33,1,19,30,13,12,29,28,34,39,41,38,22,11,32,26,14,31,23,37,6,40,21,24,10,5,17,36,35,15,2,4,3,9,8,18,20,27 }\u003c/p\u003e\\n\u003cp\u003eReturns: 32\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"21\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e{ 3,26,38,21,39,6,16,46,15,27,20,14,50,32,24,19,33,37,17,29,18,11,36,25,48,49,5,7,13,35,28,45,10,4,31,34,44,40,22,43,41,9,1,47,12,8,2,23,30,42 }\u003c/p\u003e\\n\u003cp\u003eReturns: 38\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"22\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e{ 2,16,8,40,42,33,25,15,1,4,6,17,41,31,49,19,10,50,13,12,35,23,29,37,21,18,7,38,14,24,39,46,5,28,32,47,26,11,9,20,27,3,44,45,22,48,43,34,30,36 }\u003c/p\u003e\\n\u003cp\u003eReturns: 20\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"23\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e{ 19,12,17,6,2,8,23,10,14,21,3,15,25,27,1,13,4,11,16,22,9,20,24,7,26,5,18 }\u003c/p\u003e\\n\u003cp\u003eReturns: 9\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"24\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e{ 6,8,20,21,4,23,18,28,36,32,26,22,16,24,34,12,10,15,25,40,2,7,19,29,1,11,9,14,31,5,38,3,27,30,17,35,13,39,33,37 }\u003c/p\u003e\\n\u003cp\u003eReturns: 14\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"25\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e{ 2,1,3 }\u003c/p\u003e\\n\u003cp\u003eReturns: 0\u003c/p\u003e\"}}]}],[\"$\",\"li\",\"26\",{\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003e{ 5,  10,  15,  14,  3,  4,  11,  2,  1,  12,  6,  9,  7,  13,  8,  19,  18,  17,  16,  20,  40,  39,  38,  37,  36,  35,  34,  33,  32,  31,  30,  21,  22,  23,  24,  25,  26,  27,  28,  29,  41,  43,  45,  47,  49,  50,  48,  46,  44,  42 }\u003c/p\u003e\\n\u003cp\u003eReturns: 37\u003c/p\u003e\"}}]}]]}]]}]]}],[\"$\",\"hr\",null,{}],[\"$\",\"span\",null,{\"children\":\"This problem statement is the exclusive and proprietary property of TopCoder, Inc. Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited. (c)2024, TopCoder, Inc. All rights reserved.\"}],[\"$\",\"hr\",null,{}]]}],[\"$\",\"section\",null,{\"children\":[[\"$\",\"span\",null,{\"children\":\"This problem was used for:\"}],[\"$\",\"div\",null,{\"children\":[\"$\",\"ul\",null,{\"children\":[[\"$\",\"li\",\"0\",{\"children\":[\"$\",\"a\",null,{\"href\":\"/ProblemDetail/rd/4580/pm/1748\",\"children\":[\"2003-\",\" \",\"SRM 155\",\" - Division \",\"I\",\", \",\"Level Three\"]}]}]]}]}]]}]]}]\n"])</script></body></html>